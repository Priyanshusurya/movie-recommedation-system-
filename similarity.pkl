import pickle
import os

if os.path.exists("similarity.pkl"):
    similarity = pickle.load(open("similarity.pkl", "rb"))
else:
    from sklearn.feature_extraction.text import CountVectorizer
    from sklearn.metrics.pairwise import cosine_similarity

    cv = CountVectorizer(max_features=5000, stop_words='english')
    vectors = cv.fit_transform(movies['overview'].fillna(''))
    similarity = cosine_similarity(vectors)

    pickle.dump(similarity, open("similarity.pkl", "wb"))
